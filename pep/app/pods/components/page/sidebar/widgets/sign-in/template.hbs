<div class="bg-primary border-divider-b mb-2" {{did-insert this.onElementInsert}}>
    <div class="p-3">
        <div class="d-flex justify-content-between align-items-center mb-3">
            <h5 class="mb-0">
                {{t "relatedInfo.widgets.signIn.title"}}
            </h5>
            <HelpTooltip @tooltip={{this.configuration.content.global.signInCard.help}} class="widget-tooltip mr-0" />
        </div>
        <ContentWithPlaceholder @placeholderComponent="loading/widget" @isLoading={{or this.loadResults.isRunning this.session.isAuthenticating}}>
            {{html-safe this.cardInfo.body}}
            <FormValidator @changeset={{this.changeset}} @submit={{this.login}} class="mt-3" as |changeset validator|>
                <Alert
                    @isShown={{bool this.loginError}}
                    @message={{this.loginError}}
                    @type="danger"
                    @icon="exclamation-circle"
                />
                <div class="form-row">
                    <div class="col-12">
                        <validator.input @errors={{changeset.error.username.validation}} class="input-validator-compact">
                            <FlInput @value={{changeset.username}} @placeholder={{t "login.username"}} maxlength="128" />
                        </validator.input>
                        <validator.input @errors={{changeset.error.password.validation}} class="input-validator-compact">
                            <FlInput
                                @value={{changeset.password}}
                                @placeholder={{t "login.password"}}
                                maxlength="128"
                                type="password"
                            />
                        </validator.input>
                        <div class="d-flex justify-content-between align-items-center mb-3">
                            <p class="mb-0 text-muted">
                                <a href="{{this.forgotPasswordUrl}}" target="_blank" rel="noopener noreferrer">
                                    {{t "login.forgotPassword"}}
                                </a>
                            </p>
                            <ButtonSpinner
                                @type="primary"
                                @blockLayout={{false}}
                                @showSuccess={{false}}
                                @label={{t "relatedInfo.widgets.signIn.title"}}
                                @action={{validator.submit}}
                            />
                        </div>
                        <p class="mb-0 text-muted">
                            {{t (if this.currentUser.user.isGroup "login.notARegisteredUser" "login.notAMember")}}
                            <a href="{{this.padsRegisterUrl}}" target="_blank" rel="noopener noreferrer">
                                {{t (if this.currentUser.user.isGroup "login.clickToRegister" "login.clickToSubscribe")}}
                            </a>
                        </p>
                        <p class="mb-0 text-muted">
                            <Button
                                @type="link"
                                @label={{t "login.federatedLogin"}}
                                @action={{this.showFederatedLogins}}
                                class="pl-0"
                            />
                        </p>
                    </div>
                </div>
            </FormValidator>
        </ContentWithPlaceholder>
    </div>
</div>